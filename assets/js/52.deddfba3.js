(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{479:function(t,e,a){"use strict";a.r(e);var s=a(65),n=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"解决冲突"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#解决冲突"}},[t._v("#")]),t._v(" 解决冲突")]),t._v(" "),a("p",[t._v("人生不如意之事十之八九，合并分支往往也不是一帆风顺的。")]),t._v(" "),a("p",[t._v("准备新的feature1分支，继续我们的新分支开发：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("$ git switch -c feature1\nSwitched to a new branch 'feature1'\n")])])]),a("p",[t._v("修改readme.txt最后一行，改为：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("Creating a new branch is quick AND simple.\n")])])]),a("p",[t._v("在feature1分支上提交：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('$ git add readme.txt\n\n$ git commit -m "AND simple"\n[feature1 14096d0] AND simple\n 1 file changed, 1 insertion(+), 1 deletion(-)\n')])])]),a("p",[t._v("切换到master分支：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("$ git switch master\nSwitched to branch 'master'\nYour branch is ahead of 'origin/master' by 1 commit.\n  (use \"git push\" to publish your local commits)\n")])])]),a("p",[t._v("Git还会自动提示我们当前master分支比远程的master分支要超前1个提交。")]),t._v(" "),a("p",[t._v("在master分支上把readme.txt文件的最后一行改为：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("Creating a new branch is quick & simple.\n")])])]),a("p",[t._v("提交：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('$ git add readme.txt \n$ git commit -m "& simple"\n[master 5dc6824] & simple\n 1 file changed, 1 insertion(+), 1 deletion(-)\n')])])]),a("p",[t._v("现在，master分支和feature1分支各自都分别有新的提交")]),t._v(" "),a("p",[t._v("这种情况下，Git无法执行“快速合并”，只能试图把各自的修改合并起来，但这种合并就可能会有冲突，我们试试看：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("$ git merge feature1\nAuto-merging readme.txt\nCONFLICT (content): Merge conflict in readme.txt\nAutomatic merge failed; fix conflicts and then commit the result.（翻译：自动合并失败；修复冲突，然后提交结果。）\n")])])]),a("p",[t._v("果然冲突了！Git告诉我们，readme.txt文件存在冲突，必须手动解决冲突后再提交。git status也可以告诉我们冲突的文件：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('$ git status\nOn branch master\nYour branch is ahead of \'origin/master\' by 2 commits.\n  (use "git push" to publish your local commits)\n\nYou have unmerged paths.\n  (fix conflicts and run "git commit")\n  (use "git merge --abort" to abort the merge)\n\nUnmerged paths:\n  (use "git add <file>..." to mark resolution)\n\n\tboth modified:   readme.txt\n\nno changes added to commit (use "git add" and/or "git commit -a")\n')])])]),a("p",[t._v("我们可以直接查看readme.txt的内容：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("Git is a distributed version control system.\nGit is free software distributed under the GPL.\nGit has a mutable index called stage.\nGit tracks changes of files.\n<<<<<<< HEAD\nCreating a new branch is quick & simple.\n=======\nCreating a new branch is quick AND simple.\n>>>>>>> feature1\n")])])]),a("p",[t._v("Git用<<<<<<<，=======，>>>>>>>标记出不同分支的内容，我们修改如下后保存：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("Creating a new branch is quick and simple.\n")])])]),a("p",[t._v("再提交：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('$ git add readme.txt \n$ git commit -m "conflict fixed"\n[master cf810e4] conflict fixed\n')])])]),a("p",[t._v("用带参数的git log也可以看到分支的合并情况：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("$ git log --graph --pretty=oneline --abbrev-commit\n*   cf810e4 (HEAD -> master) conflict fixed\n|\\  \n| * 14096d0 (feature1) AND simple\n* | 5dc6824 & simple\n|/  \n* b17d20e branch test\n* d46f35e (origin/master) remove test.txt\n* b84166e add test.txt\n* 519219b git tracks changes\n* e43a48b understand how stage works\n* 1094adb append GPL\n* e475afc add distributed\n* eaadf4e wrote a readme file\n")])])]),a("p",[t._v("最后，删除feature1分支：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("$ git branch -d feature1\nDeleted branch feature1 (was 14096d0).\n")])])]),a("h3",{attrs:{id:"小结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#小结"}},[t._v("#")]),t._v(" 小结")]),t._v(" "),a("p",[t._v("当Git无法自动合并分支时，就必须首先解决冲突。解决冲突后，再提交，合并完成。")]),t._v(" "),a("p",[t._v("解决冲突就是把Git合并失败的文件手动编辑为我们希望的内容，再提交。")]),t._v(" "),a("p",[t._v("用git log --graph命令可以看到分支合并图。")]),t._v(" "),a("p",[t._v("下一节"),a("RouterLink",{attrs:{to:"/pages/git/test15.html"}},[t._v("分支管理策略")])],1)])}),[],!1,null,null,null);e.default=n.exports}}]);